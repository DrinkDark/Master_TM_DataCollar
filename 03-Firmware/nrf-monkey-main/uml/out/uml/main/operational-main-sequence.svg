<?plantuml 1.2026.2beta3?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="587px" preserveAspectRatio="none" style="width:786px;height:587px;background:#FFFFFF;" version="1.1" viewBox="0 0 786 587" width="786px" zoomAndPan="magnify"><defs/><g><g><title>Main Thread</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="241.6934" y="200.9609"/></g><g><title>Main Thread</title><rect fill="#FFFFFF" height="164.6641" style="stroke:#181818;stroke-width:1;" width="10" x="241.6934" y="348.625"/></g><rect fill="none" height="438.8594" style="stroke:#000000;stroke-width:1.5;" width="766.6494" x="3" y="96.4297"/><rect fill="none" height="133.6641" style="stroke:#000000;stroke-width:1.5;" width="756.6494" x="3" y="162.6953"/><rect fill="none" height="217.9297" style="stroke:#000000;stroke-width:1.5;" width="675.5352" x="3" y="310.3594"/><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="Main" id="part1-lifeline"><g><title>Main Thread</title><rect fill="#000000" fill-opacity="0.00000" height="515.9922" width="8" x="242.6934" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="246.1279" x2="246.1279" y1="36.2969" y2="552.2891"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="Rec" id="part2-lifeline"><g><title>Recorder</title><rect fill="#000000" fill-opacity="0.00000" height="515.9922" width="8" x="535.4873" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="538.6797" x2="538.6797" y1="36.2969" y2="552.2891"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="Prox" id="part3-lifeline"><g><title>Proximity</title><rect fill="#000000" fill-opacity="0.00000" height="515.9922" width="8" x="624.415" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="628.2949" x2="628.2949" y1="36.2969" y2="552.2891"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="FS" id="part4-lifeline"><g><title>SD Card</title><rect fill="#000000" fill-opacity="0.00000" height="515.9922" width="8" x="710.0923" y="36.2969"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="713.5352" x2="713.5352" y1="36.2969" y2="552.2891"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="Main" id="part1-head"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.1309" x="196.1279" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.1309" x="203.1279" y="24.9951">Main Thread</text></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="Main" id="part1-tail"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.1309" x="196.1279" y="551.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.1309" x="203.1279" y="571.2842">Main Thread</text></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="Rec" id="part2-head"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77.6152" x="500.6797" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.6152" x="507.6797" y="24.9951">Recorder</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="Rec" id="part2-tail"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="77.6152" x="500.6797" y="551.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="63.6152" x="507.6797" y="571.2842">Recorder</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="Prox" id="part3-head"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.2402" x="588.2949" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.2402" x="595.2949" y="24.9951">Proximity</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="Prox" id="part3-tail"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.2402" x="588.2949" y="551.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.2402" x="595.2949" y="571.2842">Proximity</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="FS" id="part4-head"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.1143" x="678.5352" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.1143" x="685.5352" y="24.9951">SD Card</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="FS" id="part4-tail"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.1143" x="678.5352" y="551.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.1143" x="685.5352" y="571.2842">SD Card</text></g><g><title>Main Thread</title><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1;" width="10" x="241.6934" y="200.9609"/></g><g><title>Main Thread</title><rect fill="#FFFFFF" height="164.6641" style="stroke:#181818;stroke-width:1;" width="10" x="241.6934" y="348.625"/></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="779.6494" x="0" y="66.8633"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="779.6494" y1="66.8633" y2="66.8633"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="779.6494" y1="69.8633" y2="69.8633"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="144.9458" x="317.3518" y="56.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="126.4199" x="323.3518" y="72.3638">Operational Loop</text><path d="M3,96.4297 L79.624,96.4297 L79.624,103.5625 L69.624,113.5625 L3,113.5625 L3,96.4297" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="438.8594" style="stroke:#000000;stroke-width:1.5;" width="766.6494" x="3" y="96.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.624" x="18" y="109.4966">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="58.0669" x="94.624" y="108.6401">[Forever]</text><g class="message" data-entity-1="part1" data-entity-2="part1" id="msg1"><line style="stroke:#181818;stroke-width:1;" x1="246.6934" x2="288.6934" y1="134.6953" y2="134.6953"/><line style="stroke:#181818;stroke-width:1;" x1="288.6934" x2="288.6934" y1="134.6953" y2="147.6953"/><line style="stroke:#181818;stroke-width:1;" x1="247.6934" x2="288.6934" y1="147.6953" y2="147.6953"/><polygon fill="#181818" points="257.6934,143.6953,247.6934,147.6953,257.6934,151.6953,253.6934,147.6953" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.7856" x="253.6934" y="129.6294">k_poll(events, K_FOREVER)</text></g><path d="M3,162.6953 L67.4429,162.6953 L67.4429,169.8281 L57.4429,179.8281 L3,179.8281 L3,162.6953" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="133.6641" style="stroke:#000000;stroke-width:1.5;" width="756.6494" x="3" y="162.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="18" y="175.7622">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="125.2593" x="82.4429" y="174.9058">[reset_sem is given]</text><g class="message" data-entity-1="part1" data-entity-2="part1" id="msg2"><polygon fill="#181818" points="229.6934,196.9609,239.6934,200.9609,229.6934,204.9609,233.6934,200.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="0" x2="235.6934" y1="200.9609" y2="200.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.314" x="7" y="195.895">Event[0]: reset_sem</text></g><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg3"><polygon fill="#181818" points="616.415,226.0938,626.415,230.0938,616.415,234.0938,620.415,230.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="251.6934" x2="622.415" y1="230.0938" y2="230.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179.8037" x="258.6934" y="225.0278">Disable proximity detection</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg4"><polygon fill="#181818" points="527.4873,255.2266,537.4873,259.2266,527.4873,263.2266,531.4873,259.2266" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="251.6934" x2="533.4873" y1="259.2266" y2="259.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.499" x="258.6934" y="254.1606">Disable recording</text></g><g class="message" data-entity-1="part1" data-entity-2="part4" id="msg5"><polygon fill="#181818" points="702.0923,284.3594,712.0923,288.3594,702.0923,292.3594,706.0923,288.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="246.6934" x2="708.0923" y1="288.3594" y2="288.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.1543" x="253.6934" y="283.2935">sdcard_off_and_reset()</text></g><path d="M3,310.3594 L67.4429,310.3594 L67.4429,317.4922 L57.4429,327.4922 L3,327.4922 L3,310.3594" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="217.9297" style="stroke:#000000;stroke-width:1.5;" width="675.5352" x="3" y="310.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="18" y="323.4263">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="203.1724" x="82.4429" y="322.5698">[low_energy_mode_sem is given]</text><g class="message" data-entity-1="part1" data-entity-2="part1" id="msg6"><polygon fill="#181818" points="229.6934,344.625,239.6934,348.625,229.6934,352.625,233.6934,348.625" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="0" x2="235.6934" y1="348.625" y2="348.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215.6934" x="7" y="343.5591">Event[1]: low_energy_mode_sem</text></g><g class="message" data-entity-1="part1" data-entity-2="part1" id="msg7"><line style="stroke:#181818;stroke-width:1;" x1="251.6934" x2="293.6934" y1="377.7578" y2="377.7578"/><line style="stroke:#181818;stroke-width:1;" x1="293.6934" x2="293.6934" y1="377.7578" y2="390.7578"/><line style="stroke:#181818;stroke-width:1;" x1="252.6934" x2="293.6934" y1="390.7578" y2="390.7578"/><polygon fill="#181818" points="262.6934,386.7578,252.6934,390.7578,262.6934,394.7578,258.6934,390.7578" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258.7939" x="258.6934" y="372.6919">must_be_in_power_saving_mode = true</text></g><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg8"><polygon fill="#181818" points="616.415,415.8906,626.415,419.8906,616.415,423.8906,620.415,419.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="251.6934" x2="622.415" y1="419.8906" y2="419.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="219.2861" x="258.6934" y="414.8247">ble_disable_proximity_detection()</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg9"><polygon fill="#181818" points="527.4873,445.0234,537.4873,449.0234,527.4873,453.0234,531.4873,449.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="251.6934" x2="533.4873" y1="449.0234" y2="449.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.0679" x="258.6934" y="443.9575">recorder_disable_record_saving()</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg10"><polygon fill="#181818" points="527.4873,474.1563,537.4873,478.1563,527.4873,482.1563,531.4873,478.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="251.6934" x2="533.4873" y1="478.1563" y2="478.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.0322" x="258.6934" y="473.0903">recorder_disable_record()</text></g><g class="message" data-entity-1="part1" data-entity-2="part1" id="msg11"><line style="stroke:#181818;stroke-width:1;" x1="251.6934" x2="293.6934" y1="512.2891" y2="512.2891"/><line style="stroke:#181818;stroke-width:1;" x1="293.6934" x2="293.6934" y1="512.2891" y2="525.2891"/><line style="stroke:#181818;stroke-width:1;" x1="246.6934" x2="293.6934" y1="525.2891" y2="525.2891"/><polygon fill="#181818" points="256.6934,521.2891,246.6934,525.2891,256.6934,529.2891,252.6934,525.2891" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.8525" x="258.6934" y="507.2231">system_reset()</text></g><?plantuml-src bPB1Ri8m38RlUGgB4qYRj5sHkikWbmqnmRJBD4McCH3H9fKJOBpzqhGKAa1YaThKzc_N_XAtqQP4nW8crjXipROWyBmb8OBRwqoNQ3pq9gWDVAwPKFK07LHsLp6ZpB8YZk5WTACVR7zreVqXXYkh6v-Fu1MvhftEXKWIc9R4wBKrcCExjIKaYH1vzP5QfXsnWB1YOuylzJw4ZInjdlT3s7Zt06yodSx6N-FP88hZ2tCFJ8wyT5I0Th3IGHr3SPsAZQigtqy_mvE-bM7czGuzrIIEtcCtrO2Xm4WxNEG4vN5wKEGfguQwI0d8pZ8uqjHcTQ5Bvq7cL1PeIRjSIZHAnlRwWrQhwB8zCagqy-TsByaGhmwoi8hk9F4SI5p9l9D9KwhOEYyN9BK9HxKdbWvtOSvO3PBwxjt06S18LGEIBLBP8Zq3q8NApTLiasj7y-V_fbtHDwEvW_DKt7qQuVa3?></g></svg>