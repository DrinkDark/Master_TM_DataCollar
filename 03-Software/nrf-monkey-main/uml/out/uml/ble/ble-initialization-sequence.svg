<?plantuml 1.2026.1beta5?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="570px" preserveAspectRatio="none" style="width:1122px;height:570px;background:#FFFFFF;" version="1.1" viewBox="0 0 1122 570" width="1122px" zoomAndPan="magnify"><defs/><g><g><title>BLE Handler Thread</title><rect fill="#FFFFFF" height="475.9922" style="stroke:#181818;stroke-width:1;" width="10" x="316.0156" y="62.5938"/></g><g><title>BLE Stack</title><rect fill="#FFFFFF" height="58.2656" style="stroke:#181818;stroke-width:1;" width="10" x="743.7866" y="386.9219"/></g><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="Main" id="part1-lifeline"><g><title>Main Thread</title><rect fill="#000000" fill-opacity="0.00000" height="510.9922" width="8" x="51.5654" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="55" x2="55" y1="52.5938" y2="563.5859"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="APP" id="part2-lifeline"><g><title>BLE Handler Thread</title><rect fill="#000000" fill-opacity="0.00000" height="510.9922" width="8" x="317.0156" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="320.248" x2="320.248" y1="52.5938" y2="563.5859"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="SNES" id="part3-lifeline"><g><title>Speak No</title><rect fill="#000000" fill-opacity="0.00000" height="510.9922" width="8" x="621.8911" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="625.3403" x2="625.3403" y1="52.5938" y2="563.5859"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="S" id="part4-lifeline"><g><title>BLE Stack</title><rect fill="#000000" fill-opacity="0.00000" height="510.9922" width="8" x="744.7866" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="748.4419" x2="748.4419" y1="52.5938" y2="563.5859"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="HW" id="part5-lifeline"><g><title>nRF54L15</title><rect fill="#000000" fill-opacity="0.00000" height="510.9922" width="8" x="902.5806" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="906.5396" x2="906.5396" y1="52.5938" y2="563.5859"/></g></g><g class="participant-lifeline" data-entity-uid="part6" data-qualified-name="DIS" id="part6-lifeline"><g><title>SIG Device</title><rect fill="#000000" fill-opacity="0.00000" height="510.9922" width="8" x="1030.3604" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="1033.6216" x2="1033.6216" y1="52.5938" y2="563.5859"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="Main" id="part1-head"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101.1309" x="5" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.1309" x="12" y="41.292">Main Thread</text></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="APP" id="part2-head"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153.5352" x="244.248" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.5352" x="251.248" y="41.292">BLE Handler Thread</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="SNES" id="part3-head"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.1016" x="578.3403" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.5615" x="592.6104" y="24.9951">Speak No</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.1016" x="585.3403" y="41.292">Evil Service</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="S" id="part4-head"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130.6895" x="683.4419" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69.46" x="714.0566" y="24.9951">BLE Stack</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116.6895" x="690.4419" y="41.292">(Host/Controller)</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="HW" id="part5-head"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84.082" x="864.5396" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70.082" x="871.5396" y="24.9951">nRF54L15</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.6484" x="886.7563" y="41.292">Radio</text></g><g class="participant participant-head" data-entity-uid="part6" data-qualified-name="DIS" id="part6-head"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="151.4775" x="958.6216" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="76.1934" x="996.2637" y="24.9951">SIG Device</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137.4775" x="965.6216" y="41.292">Information Service</text></g><g><title>BLE Handler Thread</title><rect fill="#FFFFFF" height="475.9922" style="stroke:#181818;stroke-width:1;" width="10" x="316.0156" y="62.5938"/></g><g><title>BLE Stack</title><rect fill="#FFFFFF" height="58.2656" style="stroke:#181818;stroke-width:1;" width="10" x="743.7866" y="386.9219"/></g><g class="message" data-entity-1="part2" data-entity-2="part2" id="msg1"><line style="stroke:#181818;stroke-width:1;" x1="326.0156" x2="368.0156" y1="83.7266" y2="83.7266"/><line style="stroke:#181818;stroke-width:1;" x1="368.0156" x2="368.0156" y1="83.7266" y2="96.7266"/><line style="stroke:#181818;stroke-width:1;" x1="327.0156" x2="368.0156" y1="96.7266" y2="96.7266"/><polygon fill="#181818" points="337.0156,92.7266,327.0156,96.7266,337.0156,100.7266" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.0181" x="333.0156" y="78.6606">handle_device_name()</text></g><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg2"><polygon fill="#181818" points="304.0156,121.8594,314.0156,125.8594,304.0156,129.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="55.5654" x2="310.0156" y1="125.8594" y2="125.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236.4502" x="62.5654" y="120.7935">k_sem_give(&amp;thread_ble_busy_sem)</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1115.0991" x="0" y="154.4258"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1115.0991" y1="154.4258" y2="154.4258"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1115.0991" y1="157.4258" y2="157.4258"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="153.2549" x="480.9221" y="143.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="134.729" x="486.9221" y="159.9263">SNES initialization</text><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg3"><polygon fill="#181818" points="613.8911,194.125,623.8911,198.125,613.8911,202.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="326.0156" x2="619.8911" y1="198.125" y2="198.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.6558" x="333.0156" y="193.0591">bt_snes_init(&amp;snes_cb)</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg4"><polygon fill="#181818" points="613.8911,223.2578,623.8911,227.2578,613.8911,231.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="326.0156" x2="619.8911" y1="227.2578" y2="227.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.8438" x="333.0156" y="222.1919">ble_update_device_id_char_val()</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg5"><polygon fill="#181818" points="613.8911,252.3906,623.8911,256.3906,613.8911,260.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="326.0156" x2="619.8911" y1="256.3906" y2="256.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207.7715" x="333.0156" y="251.3247">ble_update_mic_gain_char_val()</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg6"><polygon fill="#181818" points="613.8911,281.5234,623.8911,285.5234,613.8911,289.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="326.0156" x2="619.8911" y1="285.5234" y2="285.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="267.3188" x="333.0156" y="280.4575">ble_update_mic_aada_params_char_val()</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg7"><polygon fill="#181818" points="613.8911,310.6563,623.8911,314.6563,613.8911,318.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="326.0156" x2="619.8911" y1="314.6563" y2="314.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275.8755" x="333.0156" y="309.5903">ble_update_mic_aadd1_params_char_val()</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1115.0991" x="0" y="343.2227"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1115.0991" y1="343.2227" y2="343.2227"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1115.0991" y1="346.2227" y2="346.2227"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="141.8418" x="486.6287" y="332.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="123.3159" x="492.6287" y="348.7231">BLE initialization</text><g class="message" data-entity-1="part2" data-entity-2="part4" id="msg8"><polygon fill="#181818" points="731.7866,382.9219,741.7866,386.9219,731.7866,390.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="326.0156" x2="737.7866" y1="386.9219" y2="386.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74.0581" x="333.0156" y="381.856">bt_enable()</text></g><g class="message" data-entity-1="part4" data-entity-2="part5" id="msg9"><polygon fill="#181818" points="894.5806,412.0547,904.5806,416.0547,894.5806,420.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="753.7866" x2="900.5806" y1="416.0547" y2="416.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.7939" x="760.7866" y="410.9888">Init radio peripheral</text></g><g class="message" data-entity-1="part4" data-entity-2="part5" id="msg10"><polygon fill="#181818" points="894.5806,441.1875,904.5806,445.1875,894.5806,449.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="748.7866" x2="900.5806" y1="445.1875" y2="445.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123.6714" x="755.7866" y="440.1216">Set device address</text></g><g class="message" data-entity-1="part2" data-entity-2="part4" id="msg11"><polygon fill="#181818" points="736.7866,470.3203,746.7866,474.3203,736.7866,478.3203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="326.0156" x2="742.7866" y1="474.3203" y2="474.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.5083" x="333.0156" y="469.2544">set_ble_tx_power(+3)</text></g><g class="message" data-entity-1="part2" data-entity-2="part6" id="msg12"><polygon fill="#181818" points="1022.3604,499.4531,1032.3604,503.4531,1022.3604,507.4531" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="326.0156" x2="1028.3604" y1="503.4531" y2="503.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80.9771" x="333.0156" y="498.3872">sig_dis_init()</text></g><g class="message" data-entity-1="part2" data-entity-2="part2" id="msg13"><line style="stroke:#181818;stroke-width:1;" x1="326.0156" x2="368.0156" y1="537.5859" y2="537.5859"/><line style="stroke:#181818;stroke-width:1;" x1="368.0156" x2="368.0156" y1="537.5859" y2="550.5859"/><line style="stroke:#181818;stroke-width:1;" x1="321.0156" x2="368.0156" y1="550.5859" y2="550.5859"/><polygon fill="#181818" points="331.0156,546.5859,321.0156,550.5859,331.0156,554.5859" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.6719" x="333.0156" y="532.52">init_scanning()</text></g><?plantuml-src bPBVQzim4CVV_LU8FXIRCKRP-bB8O6sp9T2LKXNw4X0NwMOVaKz6KhnrV_qafGjEMZRg1yloVUxkUp_2XdW03xq8ySbYUdlISTlRAkmjlMEdE-zw5D5lSM8PG6-WHLbSFUe8t5gigcIDf6a0ZkBaEn2BXyuZc1C1GUJx8N5vCnSBO6FHJy4lTtT7eUI0i16tRiNpaQoGw4VIM61vEvSleygO5AwuNhWGFrmvZjxPbANPkHpoVF_r_DFDsVcAxy6GAyZYyKZ0yfkunfnqnKl-uNmFaHmVABbUoWfqf14YbXf4Uj8ftdyknuNeIgtAb42AeSUwALHfrHxRg82zQcd4-ZIMjgXrSbjlmrEsD5KrcvMw1J550ak_TsfcisdEGbo8TLI1CQZCrgVbKw-Rry2KOpkOfFwlGZ9AT-3L2BR-ZqTFMhMfYZSv01XGPQF2M_tCsIkEkIzv-lzkowudo92YFcVRZqsMgypSuZ61onH9-BmMOa1FGuSUx14ZCOfTmqJIvJ640XYSH3qM432McSPVQd0_qTVlFXxKdNOfKzGgGy-ZQrxiK_wjWWPcuZQNFqcPW3y0?></g></svg>