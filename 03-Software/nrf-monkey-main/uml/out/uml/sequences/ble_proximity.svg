<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="981px" preserveAspectRatio="none" style="width:1227px;height:981px;background:#FFFFFF;" version="1.1" viewBox="0 0 1227 981" width="1227px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="437.3359" style="stroke:#000000;stroke-width:1.5;" width="860.3672" x="349.6499" y="229.2578"/><rect fill="none" height="67.3984" style="stroke:#000000;stroke-width:1.5;" width="509.1113" x="359.6499" y="352.4609"/><rect fill="none" height="182.6016" style="stroke:#000000;stroke-width:1.5;" width="840.3672" x="359.6499" y="476.9922"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="385.9014" x="615.6841" y="765.8594"/><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="Peer" id="part1-lifeline"><g><title>Peer Device</title><rect fill="#000000" fill-opacity="0.00000" height="876.9297" width="8" x="63.1763" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="67" x2="67" y1="52.5938" y2="929.5234"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="Radio" id="part2-lifeline"><g><title>BLE Scan Module</title><rect fill="#000000" fill-opacity="0.00000" height="876.9297" width="8" x="278.0503" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="282.0034" x2="282.0034" y1="52.5938" y2="929.5234"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="Logic" id="part3-lifeline"><g><title>ble_proximity.c</title><rect fill="#000000" fill-opacity="0.00000" height="876.9297" width="8" x="455.0161" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="458.6499" x2="458.6499" y1="52.5938" y2="929.5234"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="Store" id="part4-lifeline"><g><title>Proximity Store</title><rect fill="#000000" fill-opacity="0.00000" height="876.9297" width="8" x="682.6846" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="686.6841" x2="686.6841" y1="52.5938" y2="929.5234"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="Timer" id="part5-lifeline"><g><title>Flush Timer</title><rect fill="#000000" fill-opacity="0.00000" height="876.9297" width="8" x="858.5308" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="861.5903" x2="861.5903" y1="52.5938" y2="929.5234"/></g></g><g class="participant-lifeline" data-entity-uid="part6" data-qualified-name="SD" id="part6-lifeline"><g><title>SD Card</title><rect fill="#000000" fill-opacity="0.00000" height="876.9297" width="8" x="952.0283" y="52.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="955.4712" x2="955.4712" y1="52.5938" y2="929.5234"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="Peer" id="part1-head"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124.3525" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.7539" x="25.2993" y="24.9951">Peer Device</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.3525" x="12" y="41.292">(Monkey Collar)</text></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="Peer" id="part1-tail"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="124.3525" x="5" y="928.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83.7539" x="25.2993" y="948.5186">Peer Device</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110.3525" x="12" y="964.8154">(Monkey Collar)</text></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="Radio" id="part2-head"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134.0938" x="215.0034" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120.0938" x="222.0034" y="24.9951">BLE Scan Module</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.9287" x="251.5859" y="41.292">(Zephyr)</text></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="Radio" id="part2-tail"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134.0938" x="215.0034" y="928.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120.0938" x="222.0034" y="948.5186">BLE Scan Module</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60.9287" x="251.5859" y="964.8154">(Zephyr)</text></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="Logic" id="part3-head"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="178.7324" x="369.6499" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.2217" x="405.4053" y="24.9951">ble_proximity.c</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164.7324" x="376.6499" y="41.292">(scanning_filter_match)</text></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="Logic" id="part3-tail"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="178.7324" x="369.6499" y="928.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.2217" x="405.4053" y="948.5186">ble_proximity.c</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="164.7324" x="376.6499" y="964.8154">(scanning_filter_match)</text></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="Store" id="part4-head"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.001" x="625.6841" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.001" x="632.6841" y="24.9951">Proximity Store</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49.2598" x="662.0547" y="41.292">Thread</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="Store" id="part4-tail"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122.001" x="625.6841" y="928.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.001" x="632.6841" y="948.5186">Proximity Store</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49.2598" x="662.0547" y="964.8154">Thread</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="Timer" id="part5-head"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.8809" x="814.5903" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.8809" x="821.5903" y="41.292">Flush Timer</text></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="Timer" id="part5-tail"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="95.8809" x="814.5903" y="928.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="81.8809" x="821.5903" y="948.5186">Flush Timer</text></g><g class="participant participant-head" data-entity-uid="part6" data-qualified-name="SD" id="part6-head"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.1143" x="920.4712" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.1143" x="927.4712" y="41.292">SD Card</text></g><g class="participant participant-tail" data-entity-uid="part6" data-qualified-name="SD" id="part6-tail"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.1143" x="920.4712" y="928.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.1143" x="927.4712" y="948.5186">SD Card</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1220.0171" x="0" y="83.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1220.0171" y1="83.1602" y2="83.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1220.0171" y1="86.1602" y2="86.1602"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="138.96" x="540.5286" y="72.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120.4341" x="546.5286" y="88.6606">Discovery Phase</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#181818" points="270.0503,137.9922,280.0503,141.9922,270.0503,145.9922,274.0503,141.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="67.1763" x2="276.0503" y1="141.9922" y2="141.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.1665" x="74.1763" y="121.7935">BLE Advertisement</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190.874" x="74.1763" y="136.9263">(Manufacturer Data: 0x5A02)</text></g><g class="message" data-entity-1="part2" data-entity-2="part3" id="msg2"><polygon fill="#181818" points="447.0161,167.125,457.0161,171.125,447.0161,175.125,451.0161,171.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="282.0503" x2="453.0161" y1="171.125" y2="171.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.9658" x="289.0503" y="166.0591">scanning_filter_match()</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1220.0171" x="0" y="199.6914"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1220.0171" y1="199.6914" y2="199.6914"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1220.0171" y1="202.6914" y2="202.6914"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="181.0513" x="519.4829" y="189.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="162.5254" x="525.4829" y="205.1919">Processing &amp; Filtering</text><path d="M349.6499,229.2578 L414.0928,229.2578 L414.0928,236.3906 L404.0928,246.3906 L349.6499,246.3906 L349.6499,229.2578" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="437.3359" style="stroke:#000000;stroke-width:1.5;" width="860.3672" x="349.6499" y="229.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="364.6499" y="242.3247">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="239.5938" x="429.0928" y="241.4683">[Device already seen (De-duplication)]</text><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg3"><line style="stroke:#181818;stroke-width:1;" x1="459.0161" x2="501.0161" y1="267.5234" y2="267.5234"/><line style="stroke:#181818;stroke-width:1;" x1="501.0161" x2="501.0161" y1="267.5234" y2="280.5234"/><line style="stroke:#181818;stroke-width:1;" x1="460.0161" x2="501.0161" y1="280.5234" y2="280.5234"/><polygon fill="#181818" points="470.0161,276.5234,460.0161,280.5234,470.0161,284.5234,466.0161,280.5234" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.6094" x="466.0161" y="262.4575">Address in seen_devices list</text></g><path d="M660.6094,254.8906 L660.6094,279.8906 L774.6094,279.8906 L774.6094,264.8906 L764.6094,254.8906 L660.6094,254.8906" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M764.6094,254.8906 L764.6094,264.8906 L774.6094,264.8906 L764.6094,254.8906" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="47.5566" x="666.6094" y="271.9575">Ignore</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42.0405" x="718.2983" y="271.9575">record</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="349.6499" x2="1210.0171" y1="289.5234" y2="289.5234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="141.2222" x="354.6499" y="299.7339">[New Device detected]</text><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg5"><line style="stroke:#181818;stroke-width:1;" x1="459.0161" x2="501.0161" y1="324.4609" y2="324.4609"/><line style="stroke:#181818;stroke-width:1;" x1="501.0161" x2="501.0161" y1="324.4609" y2="337.4609"/><line style="stroke:#181818;stroke-width:1;" x1="460.0161" x2="501.0161" y1="337.4609" y2="337.4609"/><polygon fill="#181818" points="470.0161,333.4609,460.0161,337.4609,470.0161,341.4609,466.0161,337.4609" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176.4331" x="466.0161" y="319.395">Add 13-byte record to RAM</text></g><path d="M359.6499,352.4609 L424.0928,352.4609 L424.0928,359.5938 L414.0928,369.5938 L359.6499,369.5938 L359.6499,352.4609" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="67.3984" style="stroke:#000000;stroke-width:1.5;" width="509.1113" x="359.6499" y="352.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="374.6499" y="365.5278">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="365.793" x="439.0928" y="364.6714">[RSSI &gt; CONFIG_BT_PROXIMITY_ENABLE_SOUND_RSSI_MIN]</text><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg6"><line style="stroke:#181818;stroke-width:1;" x1="459.0161" x2="501.0161" y1="394.793" y2="394.793"/><line style="stroke:#181818;stroke-width:1;" x1="501.0161" x2="501.0161" y1="394.793" y2="407.793"/><line style="stroke:#181818;stroke-width:1;" x1="460.0161" x2="501.0161" y1="407.793" y2="407.793"/><polygon fill="#181818" points="470.0161,403.793,460.0161,407.793,470.0161,411.793,466.0161,407.793" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="213.6685" x="466.0161" y="389.7271">recorder_enable_record_saving()</text></g><path d="M691.6685,374.5938 L691.6685,414.5938 L853.6685,414.5938 L853.6685,384.5938 L843.6685,374.5938 L691.6685,374.5938" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M843.6685,374.5938 L843.6685,384.5938 L853.6685,384.5938 L843.6685,374.5938" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.0767" x="697.6685" y="391.6606">Trigger audio capture</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.7261" x="697.6685" y="406.7935">due to proximity</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1220.0171" x="0" y="447.4258"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1220.0171" y1="447.4258" y2="447.4258"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1220.0171" y1="450.4258" y2="450.4258"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="147.2183" x="536.3994" y="436.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="128.6924" x="542.3994" y="452.9263">Buffering &amp; Flush</text><path d="M359.6499,476.9922 L424.0928,476.9922 L424.0928,484.125 L414.0928,494.125 L359.6499,494.125 L359.6499,476.9922" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="182.6016" style="stroke:#000000;stroke-width:1.5;" width="840.3672" x="359.6499" y="476.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="374.6499" y="490.0591">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="75.4424" x="439.0928" y="489.2026">[Buffer Full]</text><g class="message" data-entity-1="part3" data-entity-2="part5" id="msg8"><polygon fill="#181818" points="850.5308,511.2578,860.5308,515.2578,850.5308,519.2578,854.5308,515.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="459.0161" x2="856.5308" y1="515.2578" y2="515.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.2412" x="466.0161" y="510.1919">k_work_cancel()</text></g><g class="message" data-entity-1="part3" data-entity-2="part4" id="msg9"><polygon fill="#181818" points="674.6846,540.3906,684.6846,544.3906,674.6846,548.3906,678.6846,544.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="459.0161" x2="680.6846" y1="544.3906" y2="544.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="163.9092" x="466.0161" y="539.3247">Give ble_file_access_sem</text></g><g class="message" data-entity-1="part3" data-entity-2="part3" id="msg10"><line style="stroke:#181818;stroke-width:1;" x1="459.0161" x2="501.0161" y1="588.6563" y2="588.6563"/><line style="stroke:#181818;stroke-width:1;" x1="501.0161" x2="501.0161" y1="588.6563" y2="601.6563"/><line style="stroke:#181818;stroke-width:1;" x1="460.0161" x2="501.0161" y1="601.6563" y2="601.6563"/><polygon fill="#181818" points="470.0161,597.6563,460.0161,601.6563,470.0161,605.6563,466.0161,601.6563" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.1284" x="466.0161" y="568.4575">Rotate Double Buffer</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.7886" x="466.0161" y="583.5903">(proximity_store_idx)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="359.6499" x2="1200.0171" y1="610.6563" y2="610.6563"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="99.9185" x="364.6499" y="620.8667">[Buffer not Full]</text><g class="message" data-entity-1="part3" data-entity-2="part5" id="msg11"><polygon fill="#181818" points="850.5308,644.5938,860.5308,648.5938,850.5308,652.5938,854.5308,648.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="459.0161" x2="856.5308" y1="648.5938" y2="648.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.7324" x="466.0161" y="643.5278">k_work_reschedule()</text></g><path d="M867,629.4609 L867,654.4609 L1184,654.4609 L1184,639.4609 L1174,629.4609 L867,629.4609" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M1174,629.4609 L1174,639.4609 L1184,639.4609 L1174,629.4609" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296.4863" x="873" y="646.5278">CONFIG_BT_PROXIMITY_FLUSH_TIMEOUT_MIN</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1220.0171" x="0" y="694.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1220.0171" y1="694.1602" y2="694.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1220.0171" y1="697.1602" y2="697.1602"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="124.9761" x="547.5205" y="683.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="106.4502" x="553.5205" y="699.6606">Storage Phase</text><g class="message" data-entity-1="part4" data-entity-2="part4" id="msg13"><line style="stroke:#181818;stroke-width:1;" x1="686.6846" x2="728.6846" y1="737.8594" y2="737.8594"/><line style="stroke:#181818;stroke-width:1;" x1="728.6846" x2="728.6846" y1="737.8594" y2="750.8594"/><line style="stroke:#181818;stroke-width:1;" x1="687.6846" x2="728.6846" y1="750.8594" y2="750.8594"/><polygon fill="#181818" points="697.6846,746.8594,687.6846,750.8594,697.6846,754.8594,693.6846,750.8594" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.8462" x="693.6846" y="732.7935">Wake from k_sem_take()</text></g><path d="M615.6841,765.8594 L685.1353,765.8594 L685.1353,772.9922 L675.1353,782.9922 L615.6841,782.9922 L615.6841,765.8594" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="385.9014" x="615.6841" y="765.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="24.4512" x="630.6841" y="778.9263">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="106.9331" x="700.1353" y="778.0698">[File not opened]</text><g class="message" data-entity-1="part4" data-entity-2="part6" id="msg14"><polygon fill="#181818" points="944.0283,800.125,954.0283,804.125,944.0283,808.125,948.0283,804.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="686.6846" x2="950.0283" y1="804.125" y2="804.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.4219" x="693.6846" y="799.0591">Create .DAT File</text></g><g class="message" data-entity-1="part4" data-entity-2="part6" id="msg15"><polygon fill="#181818" points="944.0283,829.2578,954.0283,833.2578,944.0283,837.2578,948.0283,833.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="686.6846" x2="950.0283" y1="833.2578" y2="833.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.1362" x="693.6846" y="828.1919">Write Header (11 bytes)</text></g><g class="message" data-entity-1="part4" data-entity-2="part6" id="msg16"><polygon fill="#181818" points="944.0283,865.3906,954.0283,869.3906,944.0283,873.3906,948.0283,869.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="686.6846" x2="950.0283" y1="869.3906" y2="869.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.3994" x="693.6846" y="864.3247">fs_write(buffer_to_write)</text></g><g class="message" data-entity-1="part4" data-entity-2="part4" id="msg17"><line style="stroke:#181818;stroke-width:1;" x1="686.6846" x2="728.6846" y1="898.5234" y2="898.5234"/><line style="stroke:#181818;stroke-width:1;" x1="728.6846" x2="728.6846" y1="898.5234" y2="911.5234"/><line style="stroke:#181818;stroke-width:1;" x1="687.6846" x2="728.6846" y1="911.5234" y2="911.5234"/><polygon fill="#181818" points="697.6846,907.5234,687.6846,911.5234,697.6846,915.5234,693.6846,911.5234" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.311" x="693.6846" y="893.4575">Check for SD Full / Error</text></g><!--SRC=[ZLHXQo8n4FtkhnZwuL2XlVQE-rAmO5rjXQf5j_JkA8GqExh1DLcIhAt__cQosdQl7foWx2RlPTvxCz6ljIcbanlOM6DLxkm68RWAMxGQjDAbD05ExX4T9BZL2fzCUsBD6dSmi4KXNUS4f0S6D2dNTqDOA6bWOhEgODflBFFT7Z-NcRPDmdE1edJsLMzqs9qf8dYY6srMOgcBW4viP51vpR-pAwt-qdZWmY9OHmNJtA7C8ZokDE6Zel8vf7g3BaBYKnEoI60WtVw4fDNgzI3HNjajkXtSvz8Zz7gjcCtfLMq9Be6DzpF21ErnWoPmOj9KIwb2vJX76UGbdB_-w9z_wxHg6l6Z9U8VTTtknFBaKQ7tj0jVO1Jt-PbKo2Bi6mIoODyxy8W6sWcUPbLPQ2M3jgRJ0lhKfJxKx6UPetD1cyWIMJp9Gw5zY0nZ0uBJgpmGkjiThmm5sks2GsLTriA2ifZYoq52XW5LmEoVrU3Y- -dpZi-C1q2mCEzF8Zp-i9tvOZ66AnZCfgFnZRXEnVryzdCy6QU_n73QfvZ5OlOmJGJZn6GyFLwiBa0vef4yOlMxy79BoRKxdzsbzB2YDicA6wDaoLrxCbc5hF9jGYCHJSPjkQwMoxeJr9KuLzIHWurw4qPLKSIrXieuTLHqBLwiMmjglS9Yhwe1Z1DCm1kzHM0VD1qefE9n43Hddnc70EOsIBANs8feUpKqacz6XEUZXSvUwxAnbtlH5Cp_2QVfKJdoHVyWlX7hiJQExXuMjo8TJuQpX_IjXHmgVpbPjYrN-7xRwXm-1F8ermXB-jyYAPI32FHE6cmP-89Wj61BDFjXVESdB8fk2cayI_ffH1-1F3fDY5kwKUItVN41FBQ-KojiGfTUl32w_HpJ4y7MxvtFgWSvgZKihMCc9mnVOUYSTNy0]--></g></svg>