<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="616px" preserveAspectRatio="none" style="width:546px;height:616px;background:#FFFFFF;" version="1.1" viewBox="0 0 546 616" width="546px" zoomAndPan="magnify"><defs/><g><rect fill="#F9F9F9" height="597.4531" style="stroke:#181818;stroke-width:0.5;" width="129.8574" x="16" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="122.3193" x="19.769" y="18.0669">Producer Thread</text><rect fill="#FFFFFF" height="597.4531" style="stroke:#181818;stroke-width:0.5;" width="142.123" x="153.3379" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="89.4575" x="179.6707" y="18.0669">Shared RAM</text><rect fill="#F9F9F9" height="597.4531" style="stroke:#181818;stroke-width:0.5;" width="135.4478" x="306.9902" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="129.4478" x="309.9902" y="18.0669">Consumer Thread</text><rect fill="none" height="104.5313" style="stroke:#000000;stroke-width:1.5;" width="519.5522" x="10" y="147.5625"/><rect fill="none" height="104.5313" style="stroke:#000000;stroke-width:1.5;" width="519.5522" x="10" y="416.625"/><g class="participant-lifeline" data-entity-uid="part1" data-qualified-name="Rec" id="part1-lifeline"><g><title>Audio Recorder</title><rect fill="#000000" fill-opacity="0.00000" height="450.7266" width="8" x="76.9287" y="87.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="80" x2="80" y1="87.4297" y2="538.1563"/></g></g><g class="participant-lifeline" data-entity-uid="part2" data-qualified-name="B0" id="part2-lifeline"><g><title>Buffer 0</title><rect fill="#000000" fill-opacity="0.00000" height="450.7266" width="8" x="184.3687" y="87.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="188.3379" x2="188.3379" y1="87.4297" y2="538.1563"/></g></g><g class="participant-lifeline" data-entity-uid="part3" data-qualified-name="B1" id="part3-lifeline"><g><title>Buffer 1</title><rect fill="#000000" fill-opacity="0.00000" height="450.7266" width="8" x="256.4302" y="87.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="260.3994" x2="260.3994" y1="87.4297" y2="538.1563"/></g></g><g class="participant-lifeline" data-entity-uid="part4" data-qualified-name="Store" id="part4-lifeline"><g><title>File Store</title><rect fill="#000000" fill-opacity="0.00000" height="450.7266" width="8" x="370.7141" y="87.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="374.6111" x2="374.6111" y1="87.4297" y2="538.1563"/></g></g><g class="participant-lifeline" data-entity-uid="part5" data-qualified-name="SD" id="part5-lifeline"><g><title>SD Card</title><rect fill="#000000" fill-opacity="0.00000" height="450.7266" width="8" x="479.9951" y="87.4297"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="483.438" x2="483.438" y1="87.4297" y2="538.1563"/></g></g><g class="participant participant-head" data-entity-uid="part1" data-qualified-name="Rec" id="part1-head"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121.8574" x="20" y="39.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8574" x="27" y="59.8311">Audio Recorder</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32.8467" x="64.5054" y="76.1279">(I2S)</text></g><g class="participant participant-tail" data-entity-uid="part1" data-qualified-name="Rec" id="part1-tail"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="121.8574" x="20" y="537.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.8574" x="27" y="557.1514">Audio Recorder</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32.8467" x="64.5054" y="573.4482">(I2S)</text></g><g class="participant participant-head" data-entity-uid="part2" data-qualified-name="B0" id="part2-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.0615" x="157.3379" y="84.1279">Buffer 0</text><path d="M170.3687,35.1328 C170.3687,25.1328 188.3687,25.1328 188.3687,25.1328 C188.3687,25.1328 206.3687,25.1328 206.3687,35.1328 L206.3687,61.1328 C206.3687,71.1328 188.3687,71.1328 188.3687,71.1328 C188.3687,71.1328 170.3687,71.1328 170.3687,61.1328 L170.3687,35.1328" fill="#E3E3E3" style="stroke:#181818;stroke-width:0.5;"/><path d="M170.3687,35.1328 C170.3687,45.1328 188.3687,45.1328 188.3687,45.1328 C188.3687,45.1328 206.3687,45.1328 206.3687,35.1328" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part2" data-qualified-name="B0" id="part2-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.0615" x="157.3379" y="550.1514">Buffer 0</text><path d="M170.3687,563.4531 C170.3687,553.4531 188.3687,553.4531 188.3687,553.4531 C188.3687,553.4531 206.3687,553.4531 206.3687,563.4531 L206.3687,589.4531 C206.3687,599.4531 188.3687,599.4531 188.3687,599.4531 C188.3687,599.4531 170.3687,599.4531 170.3687,589.4531 L170.3687,563.4531" fill="#E3E3E3" style="stroke:#181818;stroke-width:0.5;"/><path d="M170.3687,563.4531 C170.3687,573.4531 188.3687,573.4531 188.3687,573.4531 C188.3687,573.4531 206.3687,573.4531 206.3687,563.4531" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part3" data-qualified-name="B1" id="part3-head"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.0615" x="229.3994" y="84.1279">Buffer 1</text><path d="M242.4302,35.1328 C242.4302,25.1328 260.4302,25.1328 260.4302,25.1328 C260.4302,25.1328 278.4302,25.1328 278.4302,35.1328 L278.4302,61.1328 C278.4302,71.1328 260.4302,71.1328 260.4302,71.1328 C260.4302,71.1328 242.4302,71.1328 242.4302,61.1328 L242.4302,35.1328" fill="#E3E3E3" style="stroke:#181818;stroke-width:0.5;"/><path d="M242.4302,35.1328 C242.4302,45.1328 260.4302,45.1328 260.4302,45.1328 C260.4302,45.1328 278.4302,45.1328 278.4302,35.1328" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-entity-uid="part3" data-qualified-name="B1" id="part3-tail"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56.0615" x="229.3994" y="550.1514">Buffer 1</text><path d="M242.4302,563.4531 C242.4302,553.4531 260.4302,553.4531 260.4302,553.4531 C260.4302,553.4531 278.4302,553.4531 278.4302,563.4531 L278.4302,589.4531 C278.4302,599.4531 260.4302,599.4531 260.4302,599.4531 C260.4302,599.4531 242.4302,599.4531 242.4302,589.4531 L242.4302,563.4531" fill="#E3E3E3" style="stroke:#181818;stroke-width:0.5;"/><path d="M242.4302,563.4531 C242.4302,573.4531 260.4302,573.4531 260.4302,573.4531 C260.4302,573.4531 278.4302,573.4531 278.4302,563.4531" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-entity-uid="part4" data-qualified-name="Store" id="part4-head"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.2061" x="334.6111" y="39.8359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.2061" x="341.6111" y="59.8311">File Store</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.0449" x="347.6917" y="76.1279">(FATFS)</text></g><g class="participant participant-tail" data-entity-uid="part4" data-qualified-name="Store" id="part4-tail"><rect fill="#E3E3E3" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="80.2061" x="334.6111" y="537.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66.2061" x="341.6111" y="557.1514">File Store</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54.0449" x="347.6917" y="573.4482">(FATFS)</text></g><g class="participant participant-head" data-entity-uid="part5" data-qualified-name="SD" id="part5-head"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.1143" x="448.438" y="56.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.1143" x="455.438" y="76.1279">SD Card</text></g><g class="participant participant-tail" data-entity-uid="part5" data-qualified-name="SD" id="part5-tail"><rect fill="#E3E3E3" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="71.1143" x="448.438" y="537.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57.1143" x="455.438" y="557.1514">SD Card</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="539.5522" x="0" y="117.9961"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="539.5522" y1="117.9961" y2="117.9961"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="539.5522" y1="120.9961" y2="120.9961"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="205.0771" x="167.2375" y="107.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="186.5513" x="173.2375" y="123.4966">Cycle A: Fill B0 / Write B1</text><path d="M10,147.5625 L222.2734,147.5625 L222.2734,154.6953 L212.2734,164.6953 L10,164.6953 L10,147.5625" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="104.5313" style="stroke:#000000;stroke-width:1.5;" width="519.5522" x="10" y="147.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="167.2734" x="25" y="160.6294">Concurrent Operations</text><g class="message" data-entity-1="part1" data-entity-2="part2" id="msg1"><polygon fill="#181818" points="176.3687,181.8281,186.3687,185.8281,176.3687,189.8281,180.3687,185.8281" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="80.9287" x2="182.3687" y1="185.8281" y2="185.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.4399" x="87.9287" y="180.7622">Fill with data</text></g><g class="message" data-entity-1="part4" data-entity-2="part3" id="msg2"><polygon fill="#181818" points="271.4302,210.9609,261.4302,214.9609,271.4302,218.9609,267.4302,214.9609" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="265.4302" x2="373.7141" y1="214.9609" y2="214.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.6631" x="277.4302" y="209.895">Read data</text></g><g class="message" data-entity-1="part4" data-entity-2="part5" id="msg3"><polygon fill="#181818" points="471.9951,240.0938,481.9951,244.0938,471.9951,248.0938,475.9951,244.0938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="374.7141" x2="477.9951" y1="244.0938" y2="244.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34.9058" x="381.7141" y="239.0278">Write</text></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="539.5522" x="0" y="279.6602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="539.5522" y1="279.6602" y2="279.6602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="539.5522" y1="282.6602" y2="282.6602"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="171.3584" x="184.0969" y="269.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="152.8325" x="190.0969" y="285.1606">Cycle B: Buffer Swap</text><g class="message" data-entity-1="part1" data-entity-2="part4" id="msg4"><polygon fill="#181818" points="362.7141,319.3594,372.7141,323.3594,362.7141,327.3594,366.7141,323.3594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="80.9287" x2="368.7141" y1="323.3594" y2="323.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.6978" x="87.9287" y="318.2935">Give semaphore</text></g><path d="M151,336.3594 L151,361.3594 L297,361.3594 L297,346.3594 L287,336.3594 L151,336.3594" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><path d="M287,336.3594 L287,346.3594 L297,346.3594 L287,336.3594" fill="#FAFAFA" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125.1631" x="157" y="353.4263">Buffers Swap Roles</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="539.5522" x="0" y="387.0586"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="539.5522" y1="387.0586" y2="387.0586"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="539.5522" y1="390.0586" y2="390.0586"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="204.5566" x="167.4978" y="376.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="186.0308" x="173.4978" y="392.5591">Cycle C: Fill B1 / Write B0</text><path d="M10,416.625 L222.2734,416.625 L222.2734,423.7578 L212.2734,433.7578 L10,433.7578 L10,416.625" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="104.5313" style="stroke:#000000;stroke-width:1.5;" width="519.5522" x="10" y="416.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="167.2734" x="25" y="429.6919">Concurrent Operations</text><g class="message" data-entity-1="part1" data-entity-2="part3" id="msg5"><polygon fill="#181818" points="248.4302,450.8906,258.4302,454.8906,248.4302,458.8906,252.4302,454.8906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="80.9287" x2="254.4302" y1="454.8906" y2="454.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.4399" x="87.9287" y="449.8247">Fill with data</text></g><g class="message" data-entity-1="part4" data-entity-2="part2" id="msg6"><polygon fill="#181818" points="199.3687,480.0234,189.3687,484.0234,199.3687,488.0234,195.3687,484.0234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="193.3687" x2="373.7141" y1="484.0234" y2="484.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66.6631" x="205.3687" y="478.9575">Read data</text></g><g class="message" data-entity-1="part4" data-entity-2="part5" id="msg7"><polygon fill="#181818" points="471.9951,509.1563,481.9951,513.1563,471.9951,517.1563,475.9951,513.1563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="374.7141" x2="477.9951" y1="513.1563" y2="513.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34.9058" x="381.7141" y="508.0903">Write</text></g><!--SRC=[bP3DIyD04CNl-rSCyQAWc7YpKA4VL3o8qXIyU9bcfytIP3VCRbhxtplvq5OfM9FRl7blVc_znjWA6KiedNLPpgua25oJyj-Apr6xdR5hM67XZvKAimskAGtxWe0f2sZN1IcrT1yGlRBJTKOCYvm9TGGNg_lcLo2V-8F9J8KsG3IgjN4mfyon9dwtbqztwLK4w9kP8gj10llKD4Sc3VFHimJkSXEepTCOS8cU81hNgvKSZLl_E3wj9fsQ_0gVEElhyXpacP76QN1CWZiRBMOzS3iwfFxmf5EO8EjkRwhKS0YJVIOvem58NY6qS0jlB9q43OP3jMPNLo1KMSrCal5I4MCmWjaYoVF0pKFZwnDs9kHjsrPkOTg5H1RcqkY49bI3xcY3VKGr7a3_MkaEgmQdFzTP1_1ejWIUIgpoPg2i4t2t5SCulkvkTW6-IvYxWlpHWSbNxUHGE_vFxUIlsl6vjJy1]--></g></svg>